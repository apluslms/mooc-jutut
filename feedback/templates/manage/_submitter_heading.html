{% load i18n %}
{% load feedback %}
{% load colortag %}
{% comment %}
	expects to be used under bootstrapped.html
	expects from context:
		course
		conv
		user
{% endcomment %}
<div class="panel-heading">
	<span class="student-info">
		<a class="student-name"
			data-toggle="tooltip"
			data-trigger="hover"
			data-placement="top"
			title="{% trans 'Open student page in A+' %}"
			href="{{ conv.student_aplus_url }}"
			target="_blank">
			{{ user.full_name }}
		</a>
		<div class="btn-group" role="group">
			<a class="btn btn-xs hover-btn"
				data-toggle="tooltip"
				data-trigger="hover"
				data-placement="top"
				title="{% trans 'Show all feedback for this student' %}"
				href="{{ conv.all_feedback_for_student_url }}&contains_text=on">
				<span class="glyphicon glyphicon-filter" aria-hidden="true"></span>
			</a>
			<a class="btn btn-xs hover-btn student-conv-prev-btn"
				tabindex="0"
				role="button"
				data-toggle="popover"
				data-trigger="focus hover"
				data-title="{% blocktranslate trimmed with name=user.full_name %}
					Conversations with {{ name }}
				{% endblocktranslate %}"
				data-url="{{ conv.all_feedback_for_student_url }}&contains_text=on&paginate_by=200"
				data-error="{% translate 'Unable to preview conversations.' %}"
				aria-label="{% trans 'Show conversations with student in a popover.' %}"
			>
				<span class="glyphicon glyphicon-eye-open" aria-hidden="true"></span>
			</a>
		</div>
		{% for tag in user|studenttags_for_course:course %}
			{{ tag|colortag }}
		{% endfor %}
	</span>
	<div class="btn-group fb-context-btn-group">
		<a class="btn btn-default btn-xs hidden"
			data-toggle="tooltip"
			data-trigger="hover"
			data-placement="top"
			title="{% trans "Show the student's response to the background questionnaire" %}"
			href="{{ conv.background_url }}">
			{% trans 'Background' %}
		</a>
		<a class="btn btn-xs hover-btn display-points-btn"
			tabindex="0"
			role="button"
			data-toggle="popover"
			data-trigger="focus hover"
			data-placement="bottom"
			title="{% blocktranslate trimmed with name=user.full_name %}
				Points for {{ name }}
			{% endblocktranslate %}"
			data-url="{% url 'feedback:points' conversation_id=conv.id %}"
			data-error="{% translate 'Unable to fetch points.' %}"
			aria-label="{% translate "Show the student's points in a popover." %}"
		>
			{% trans 'Points' %}
		</a>
	</div>
</diV>
